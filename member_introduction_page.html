<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>12시간 전야제</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="module">
      // Firebase SDK 라이브러리 가져오기
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
      import {
        collection,
        addDoc,
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
      import {
        getDocs,
        deleteDoc,
        doc,
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

<<<<<<< HEAD
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>12시간 전야제</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import {
            collection,
            addDoc,
            getDocs,
            deleteDoc,
            doc,
            setDoc,
        } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        // Firebase 구성 정보 설정
        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        // $("#deletebtn").click(async function () {
        //   await deleteDoc(doc(db, "members", "7pmq1qut7I3xjGQ7GYvv"));
        //   alert("삭제완료");
        // });
        // let deleteDoc = await deleteDoc(db, "members", "7pmq1qut7I3xjGQ7GYvv");
        // var index = 0;
        let docs = await getDocs(collection(db, "members"));
        docs.forEach((document) => {
            const id = document.id;
            let row = document.data();
            console.log(row);
            let imageUrl = row["imageUrl"];
            let memberName = row["memberName"];
            let tmi = row["tmi"];
            let temp_html = `
=======
      // Firebase 구성 정보 설정
      const firebaseConfig = {
        apiKey: "AIzaSyApxjU3BurTH6XuImY9_oUn3kk603w8PKc",
        authDomain: "test-8e09e.firebaseapp.com",
        projectId: "test-8e09e",
        storageBucket: "test-8e09e.appspot.com",
        messagingSenderId: "436344741102",
        appId: "1:436344741102:web:2bae246b9e85471b7867ff",
        measurementId: "G-KP8QWKQ6WF",
      };

      // Firebase 인스턴스 초기화
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      $("#deletebtn").click(async function () {
        await deleteDoc(doc(db, "members", "7pmq1qut7I3xjGQ7GYvv"));
        alert("삭제완료");
      });
      // let deleteDoc = await deleteDoc(db, "members", "7pmq1qut7I3xjGQ7GYvv");

      let docs = await getDocs(collection(db, "members"));
      docs.forEach((doc) => {
        let row = doc.data();
        console.log(row);
        let imageUrl = row["imageUrl"];
        let memberName = row["memberName"];
        let tmi = row["tmi"];

        let temp_html = `
>>>>>>> 8e4d8f638466a6b913343aba38b608f986225a96
          <div class="card" style="width: 18rem">
        <img src="${imageUrl}"
          class="card-img-top"
          alt="..."
        />
        <div class="card-body" id="${id}">
          <input id="cardId"  value="${id}">
          <h5 class="card-title">${memberName}</h5>
          <p class="card-text">TMI : ${tmi}</p>
          <a href="#" class="btn btn-primary" id="editData">수정</a>
          <button id="submitData" class="btn btn-secondary">삭제</button>
        </div>
      </div>`;
<<<<<<< HEAD
            $("#card").append(temp_html);
            $(`#${id} #submitData`).on("click", (e) => {
                console.log(id)

                deleteDoc(doc(db, "members", id));
                alert("삭제완료");
            });

            $(`#${id} #editData`).on("click", (e) => {
                $(`#${id} #editData`).on("click", (e) => {
                    // 해당 카드의 정보 가져오기
                    let imageUrl = row["imageUrl"];
                    let memberName = row["memberName"];
                    let tmi = row["tmi"];

                    // 수정 폼의 HTML 구성
                    let editFormHtml = `
    <div class="edit-form">
        <input type="text" id="editImageUrl" placeholder="이미지 URL" value="${imageUrl}">
        <input type="text" id="editMemberName" placeholder="멤버 이름" value="${memberName}">
        <input type="text" id="editTmi" placeholder="TMI" value="${tmi}">
        <button id="saveEdit">저장</button>
    </div>`;

                    // 수정 폼을 해당 카드에 추가
                    $(`#${id}`).append(editFormHtml);

                    // 저장 버튼 클릭 이벤트 처리
                    $(`#${id} #saveEdit`).on("click", (e) => {
                        // 수정된 정보 가져오기
                        let editedImageUrl = $(`#${id} #editImageUrl`).val();
                        let editedMemberName = $(`#${id} #editMemberName`).val();
                        let editedTmi = $(`#${id} #editTmi`).val();

                        // Firestore에서 해당 멤버 문서를 가져와 수정
                        const memberDocRef = doc(db, "members", id);
                        setDoc(memberDocRef, {
                            imageUrl: editedImageUrl,
                            memberName: editedMemberName,
                            tmi: editedTmi,
                        })
                            .then(() => {
                                // 수정 폼 제거
                                $(`#${id} .edit-form`).remove();
                                // 페이지 새로고침 또는 다른 작업 수행
                                // 여기에 필요한 코드를 추가하세요.
                            })
                            .catch((error) => {
                                console.error("수정 실패: ", error);
                            });
                    });
                });
            });
        });

        // console.log(index);
        // console.log("카드아이디는", cardId);
        // console.log(cardId[0].value);
    </script>
    <style>
        .mycontent {
            font-size: 35px;
            font-weight: 900;
        }

        .mysubcontent {
            background-color: beige;
            width: fit-content;
            font-size: 25px;
            font-weight: 500;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
</head>
=======
        $("#card").append(temp_html);
      });
    </script>

    <style>
      .mycontent {
        font-size: 35px;
        font-weight: 900;
      }

      .mysubcontent {
        background-color: beige;
        width: fit-content;
        font-size: 25px;
        font-weight: 500;
      }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
  </head>
>>>>>>> 8e4d8f638466a6b913343aba38b608f986225a96

  <body
    style="
      display: flex;
      flex-direction: column;
      max-width: fit-content;
      margin: auto;
<<<<<<< HEAD
    ">
    <p style="text-align: center; font-size: 100px; color: rgb(223, 184, 111)">
        12시간 전야제
    </p>
    <div id="card" class="row row-cols-1 row-cols-md-4 g-4"></div>
    <br />
    <div>
        <a href="registere_page.html">
            <button>멤버 등록하기</button>
        </a>
    </div>
    <br />
    <!--<button type="button" id="submitData">삭제</button>-->
    <br />
    <div style="text-align: center">
        <a style="font-size: 18px" href="team_introduction_page.html">
            <button type="button" style="width: 200px; height: 70px">
                팀 소개 페이지
            </button>
        </a>
    </div>
</body>

</html>
=======
    "
  >
    <p style="text-align: center; font-size: 100px; color: rgb(223, 184, 111)">
      12시간 전야제
    </p>

    <div id="card" class="row row-cols-1 row-cols-md-4 g-4"></div>

    <br />
    <div>
      <a href="registere_page.html">
        <button>멤버 등록하기</button>
      </a>
    </div>

    <br />
    <div style="text-align: center">
      <a style="font-size: 18px" href="team_introduction_page.html">
        <button type="button" style="width: 200px; height: 70px">
          팀 소개 페이지
        </button>
      </a>
    </div>
  </body>
</html>
>>>>>>> 8e4d8f638466a6b913343aba38b608f986225a96
